from __future__ import absolute_import
import scrapy
from scrapy.spider import BaseSpider
from scrapy.selector import Selector
from zillow.items import zillowItem


class nzillowpider(scrapy.Spider):
    name = "zillow_s"
    allowed_domains = ["http://www.zillow.com/"]
    start_urls = ['http://www.zillow.com/homes/for_sale/08540/']

    def parse(self, response):
        links = Selector(response=response).xpath('//dt/a')
        for link in links:
            item = zillowItem()
            item['link'] = link.xpath('/@href').extract()
            item['title'] = link.xpath('/title/text()').extract()
            item['z_id'] = link.xpath('/id/text()').extract()
            yield item
        